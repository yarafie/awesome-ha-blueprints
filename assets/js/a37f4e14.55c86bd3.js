"use strict";(globalThis.webpackChunkawesome_ha_blueprints_website=globalThis.webpackChunkawesome_ha_blueprints_website||[]).push([[898],{1170:(e,t,r)=>{r.d(t,{Dk:()=>s,PG:()=>d,fY:()=>c,zN:()=>p});var o=r(8445),a=r(4784);let n=null;const l=()=>{if(n)return n;const e=(a.default?.customFields||{}).env||{},t=e.SUPABASE_URL,r=e.SUPABASE_ANON_KEY;return t&&r&&i({supabaseUrl:t,supabaseKey:r}),n},i=({supabaseUrl:e,supabaseKey:t})=>{n=(0,o.UU)(e,t),console.log("Supabase initialized")},s=async(e,t,r=null,o="latest")=>{const a=l();if(!a)return console.error("[Supabase] recordBlueprintDownload: client not initialized"),!1;try{const{error:n}=await a.from("blueprint_downloads").insert([{blueprint_category:e,blueprint_id:t,blueprint_variant:r,blueprint_version:o,download_date:(new Date).toISOString()}]);return!n||(console.error("[Supabase] Error recording blueprint download:",n),!1)}catch(n){return console.error("[Supabase] Exception recording blueprint download:",n),!1}},d=async(e,t,r=null,o=null)=>{const a=l();if(!a)return console.error("[Supabase] getBlueprintDownloads: client not initialized"),0;try{const{data:n,error:l}=await a.rpc("get_blueprint_downloads",{p_category:e,p_id:t,p_variant:r,p_version:o});return l?(console.error("[Supabase] Error in getBlueprintDownloads RPC:",l),0):"number"==typeof n?n:Number(n??0)}catch(n){return console.error("[Supabase] Exception in getBlueprintDownloads:",n),0}},c=async(e={})=>{const t=l();if(!t)return console.error("[Supabase] getDownloadAggregates: client not initialized"),[];const{category:r=null,id:o=null,variant:a=null}=e;try{const{data:e,error:n}=await t.rpc("get_download_aggregates",{p_category:r,p_variant:a,p_id:o});return n?(console.error("[Supabase] Error in getDownloadAggregates RPC:",n),[]):(e||[]).map(e=>({blueprint_category:e.blueprint_category,blueprint_id:e.blueprint_id,blueprint_variant:e.blueprint_variant??null,total:Number(e.total_downloads??0),last_downloaded:e.last_downloaded?new Date(e.last_downloaded).toISOString():null}))}catch(n){return console.error("[Supabase] Exception in getDownloadAggregates:",n),[]}},p=async e=>{const t=l();if(!t)return console.error("[Supabase] getDailyDownloadSeries: client not initialized"),[];const{days:r,category:o=null,id:a=null,variant:n=null}=e;try{const{data:e,error:l}=await t.rpc("get_daily_downloads_metrics",{p_days:r,p_category:o,p_variant:n,p_id:a});return l?(console.error("[Supabase] Error in getDailyDownloadSeries RPC:",l),[]):(e||[]).map(e=>({day:e.day,total:Number(e.total??0)}))}catch(i){return console.error("[Supabase] Exception in getDailyDownloadSeries:",i),[]}}},32710:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var o=r(13790),a=r(64204),n=r(40640),l=r(19913),i=r(99761),s=r(76059),d=r(76952),c=r(63120),p=r(27480),u=r(38485),g=r(49319),x=r(14080),y=r(26193),h=r(71486),b=r(60011),m=r(41929),f=r(41778),w=r(1170),_=r(82238);const j=e=>Number.isFinite(e)?e.toLocaleString():"0",S=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString(void 0,{timeZone:"UTC",year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}},v=(e,t)=>{const r=new Map;e.forEach(e=>{r.set(e.day,Number(e.total??0))});const o=[],a=new Date,n=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()));for(let l=t-1;l>=0;l--){const e=new Date(n);e.setUTCDate(n.getUTCDate()-l);const t=e.toISOString().substring(0,10),a=r.get(t)??0;o.push({label:e.toLocaleDateString(void 0,{month:"short",day:"numeric",timeZone:"UTC"}),total:a})}return o},C=()=>{const[e,t]=(0,o.useState)({totalDownloads:0,byCategory:[],aggregates:[],daily:[]}),[r,C]=(0,o.useState)(!0),[k,A]=(0,o.useState)(!1),[D,L]=(0,o.useState)(void 0),[B,T]=(0,o.useState)(15),[z,P]=(0,o.useState)(10),[E,$]=(0,o.useState)("ALL"),[M,U]=(0,o.useState)("ALL"),[N,K]=(0,o.useState)({key:"total",direction:"desc"}),[W,R]=(0,o.useState)(!1),I=(0,m.A)(f.A),{totalDownloads:F,byCategory:O,aggregates:V,daily:Y}=e;(0,o.useEffect)(()=>{const e=()=>{const e=document.documentElement.getAttribute("data-theme");R("dark"===e)};e();const t=new MutationObserver(t=>{for(const r of t)"attributes"===r.type&&"data-theme"===r.attributeName&&e()});return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>t.disconnect()},[]);const Z={bg:W?"#1b1b1d":"#f9fafb",cardBg:W?"#242526":"#ffffff",textPrimary:W?"#e5e7eb":"#1f2937",textSecondary:W?"#9ca3af":"#6b7280",gridLine:W?"#444":"#e5e7eb",tooltipBg:W?"#242526":"#ffffff",tooltipBorder:W?"#444":"#ccc",tooltipText:W?"#e5e7eb":"#333",accentColor:"#4f46e5"},G={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"32px",width:"100%"},H={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"32px",width:"100%"};if("undefined"!=typeof window){window.matchMedia("(max-width: 768px)").matches&&(G.gridTemplateColumns="1fr",H.gridTemplateColumns="1fr")}const q={backgroundColor:Z.cardBg,borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",overflow:"hidden",color:Z.textPrimary,minWidth:"0",border:W?"1px solid #333":"none"},Q=e=>({backgroundColor:e,color:"white",padding:"12px",fontWeight:"bold",fontSize:"14px",textTransform:"uppercase",letterSpacing:"0.05em"}),X={padding:"16px",borderBottom:`1px solid ${Z.gridLine}`,margin:0,fontSize:"1.25rem",color:Z.textPrimary,fontWeight:"bold"},J=({active:e,payload:t,label:r})=>{if(e&&t&&t.length){const e=t.find(e=>"Downloads"===e.dataKey||"total"===e.dataKey),o=e?.value??t[0]?.value??0,a=t[0]?.payload?.name??t[0]?.payload?.id??r??"Value";return(0,_.jsxs)("div",{style:{padding:"10px",backgroundColor:Z.tooltipBg,border:`1px solid ${Z.tooltipBorder}`,borderRadius:"5px",color:Z.tooltipText},children:[(0,_.jsx)("p",{style:{fontWeight:"bold",marginBottom:"5px"},children:a}),(0,_.jsxs)("p",{children:["Downloads: ",j(o)]})]})}return null},ee=e=>{const{x:t,y:r,payload:o}=e;return(0,_.jsx)("g",{transform:`translate(${t},${r})`,children:(0,_.jsx)("text",{x:0,y:0,dy:5,textAnchor:"end",fill:Z.textSecondary,fontSize:10,title:o.value,children:o.value})})},te=({current:e,onSelect:t,isDailyLoading:r})=>{const o=t=>({padding:"6px 12px",margin:"0 4px",borderRadius:"4px",cursor:r?"not-allowed":"pointer",fontWeight:"bold",backgroundColor:e===t?Z.accentColor:Z.cardBg,color:e===t?"white":Z.textPrimary,border:`1px solid ${e===t?Z.accentColor:Z.gridLine}`,transition:"all 0.2s",boxShadow:e===t?"0 2px 4px rgba(0,0,0,0.2)":"none",fontSize:"14px",opacity:r&&e!==t?.6:1});return(0,_.jsx)("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px",paddingTop:"10px"},children:[1,7,15,30,90].map(e=>(0,_.jsxs)("button",{onClick:()=>t(e),style:o(e),disabled:r,children:[e,"D"]},e))})},re=e=>{let t="desc";N.key===e&&"desc"===N.direction&&(t="asc"),K({key:e,direction:t})},oe=({sortKey:e})=>N.key!==e?(0,_.jsx)("span",{style:{fontSize:"0.7em",marginLeft:"5px",opacity:.4},dangerouslySetInnerHTML:{__html:"&#x25B2;&#x25BC;"}}):(0,_.jsx)("span",{style:{fontSize:"0.7em",marginLeft:"5px",color:Z.accentColor},dangerouslySetInnerHTML:{__html:"asc"===N.direction?"&#x25B2;":"&#x25BC;"}}),ae=({data:e})=>(0,_.jsxs)("div",{style:{padding:"24px 16px 16px 16px"},children:[(0,_.jsx)("h3",{style:{fontSize:"1.25rem",color:Z.textPrimary,fontWeight:"bold",marginBottom:"15px",textAlign:"center"},children:"Table Data View (Top Results, limited by selection)"}),(0,_.jsx)("div",{style:{overflowX:"auto"},children:(0,_.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed",fontSize:"14px",margin:"0"},children:[(0,_.jsxs)("colgroup",{children:[(0,_.jsx)("col",{style:{width:"auto"}}),(0,_.jsx)("col",{style:{width:"1%",whiteSpace:"nowrap"}}),(0,_.jsx)("col",{style:{width:"1%",whiteSpace:"nowrap"}}),(0,_.jsx)("col",{style:{width:"1%",whiteSpace:"nowrap"}}),(0,_.jsx)("col",{style:{width:"1%",whiteSpace:"nowrap"}})]}),(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{style:{backgroundColor:W?"#333":"#f3f4f6"},children:[(0,_.jsxs)("th",{onClick:()=>re("id"),style:{padding:"12px 8px",textAlign:"left",cursor:"pointer",color:Z.textPrimary,borderBottom:`2px solid ${Z.accentColor}`},children:["Blueprint ID ",(0,_.jsx)(oe,{sortKey:"id"})]}),(0,_.jsxs)("th",{onClick:()=>re("category"),style:{padding:"12px 8px",textAlign:"left",cursor:"pointer",color:Z.textPrimary,borderBottom:`2px solid ${Z.accentColor}`,whiteSpace:"nowrap"},children:["Category ",(0,_.jsx)(oe,{sortKey:"category"})]}),(0,_.jsxs)("th",{onClick:()=>re("variant"),style:{padding:"12px 8px",textAlign:"left",cursor:"pointer",color:Z.textPrimary,borderBottom:`2px solid ${Z.accentColor}`,whiteSpace:"nowrap"},children:["Variant ",(0,_.jsx)(oe,{sortKey:"variant"})]}),(0,_.jsxs)("th",{onClick:()=>re("total"),style:{padding:"12px 8px",textAlign:"center",cursor:"pointer",color:Z.textPrimary,borderBottom:`2px solid ${Z.accentColor}`,whiteSpace:"nowrap"},children:["Downloads ",(0,_.jsx)(oe,{sortKey:"total"})]}),(0,_.jsxs)("th",{onClick:()=>re("lastDownloaded"),style:{padding:"12px 8px",textAlign:"right",cursor:"pointer",color:Z.textPrimary,borderBottom:`2px solid ${Z.accentColor}`,whiteSpace:"nowrap"},children:["Last Downloaded ",(0,_.jsx)(oe,{sortKey:"lastDownloaded"})]})]})}),(0,_.jsx)("tbody",{children:e.map((e,t)=>(0,_.jsxs)("tr",{style:{borderBottom:`1px solid ${Z.gridLine}`,backgroundColor:t%2==0?Z.cardBg:W?"#2d2d2f":"#fcfcfc"},children:[(0,_.jsx)("td",{style:{padding:"10px 8px",wordBreak:"break-word",color:Z.textPrimary,textAlign:"left"},children:e.blueprint_id}),(0,_.jsx)("td",{style:{padding:"10px 8px",color:I(e.blueprint_category),textAlign:"left",whiteSpace:"nowrap"},children:e.blueprint_category}),(0,_.jsx)("td",{style:{padding:"10px 8px",textAlign:"left",color:Z.textPrimary,whiteSpace:"nowrap"},children:"controllers"===e.blueprint_category?e.blueprint_variant??"All Variants":"\u2014"}),(0,_.jsx)("td",{style:{padding:"10px 8px",textAlign:"center",fontWeight:"bold",color:Z.textPrimary,whiteSpace:"nowrap"},children:j(e.total)}),(0,_.jsx)("td",{style:{padding:"10px 8px",textAlign:"right",color:Z.textPrimary,whiteSpace:"nowrap"},children:S(e.last_downloaded)})]},`${e.blueprint_category}:${e.blueprint_id}:${e.blueprint_variant??"ALL"}`))})]})}),0===e.length&&(0,_.jsx)("p",{style:{textAlign:"center",padding:"20px",color:Z.textSecondary},children:"No detailed data found for the current selection."})]}),ne=(0,o.useMemo)(()=>{const e=new Set;return V.forEach(t=>{"controllers"===t.blueprint_category&&t.blueprint_variant&&e.add(t.blueprint_variant)}),Array.from(e).sort()},[V]),le=(0,o.useMemo)(()=>O.map(e=>({name:e.blueprint_category,category:e.blueprint_category,value:e.total,total:e.total,label:e.blueprint_category})),[O]),ie=(0,o.useMemo)(()=>{const e=V.filter(e=>"ALL"===E||e.blueprint_category===E);if("controllers"===E){if("ALL"===M){const t=new Map;return e.forEach(e=>{const r=`${e.blueprint_category}::${e.blueprint_id}`,o=t.get(r);o?(o.total+=e.total,e.last_downloaded&&(!o.last_downloaded||e.last_downloaded>o.last_downloaded)&&(o.last_downloaded=e.last_downloaded)):t.set(r,{blueprint_category:e.blueprint_category,blueprint_id:e.blueprint_id,blueprint_variant:"All Variants",total:e.total,last_downloaded:e.last_downloaded})}),Array.from(t.values())}return e.filter(e=>e.blueprint_variant===M).map(e=>({blueprint_category:e.blueprint_category,blueprint_id:e.blueprint_id,blueprint_variant:e.blueprint_variant,total:e.total,last_downloaded:e.last_downloaded}))}return e.map(e=>({blueprint_category:e.blueprint_category,blueprint_id:e.blueprint_id,blueprint_variant:e.blueprint_variant,total:e.total,last_downloaded:e.last_downloaded}))},[V,E,M]),se=(0,o.useMemo)(()=>{const e=[...ie];return e.sort((e,t)=>{let r=0;const o=N.key;if("total"===o)r=e.total-t.total;else if("id"===o)r=e.blueprint_id.localeCompare(t.blueprint_id);else if("category"===o)r=e.blueprint_category.localeCompare(t.blueprint_category);else if("variant"===o){const o=e.blueprint_variant??"",a=t.blueprint_variant??"";r=o.localeCompare(a)}else if("lastDownloaded"===o){r=(e.last_downloaded?new Date(e.last_downloaded).getTime():0)-(t.last_downloaded?new Date(t.last_downloaded).getTime():0)}return"asc"===N.direction?r:-r}),e},[ie,N]),de=(0,o.useMemo)(()=>se.slice(0,z).map(e=>({id:e.blueprint_id,name:e.blueprint_id.length>40?`${e.blueprint_id.substring(0,37)}...`:e.blueprint_id,Downloads:e.total})),[se,z]),ce=(0,o.useCallback)(()=>{if("undefined"==typeof window)return!1;const e=window?.env||{};return Boolean(e.SUPABASE_URL&&e.SUPABASE_ANON_KEY)},[]);return(0,o.useEffect)(()=>{if("undefined"!=typeof window){if(!ce()){const e=[{blueprint_category:"controllers",blueprint_id:"mock-ikea_e2001_e2002",blueprint_variant:"EPMatt",total:1e4,last_downloaded:"2025-11-19T10:30:00Z"},{blueprint_category:"controllers",blueprint_id:"mock-ikea_e2001_e2002",blueprint_variant:"yarafie",total:5e3,last_downloaded:"2025-11-21T10:30:00Z"},{blueprint_category:"hooks",blueprint_id:"mock-light",blueprint_variant:"EPMatt",total:5e3,last_downloaded:"2025-11-18T10:30:00Z"},{blueprint_category:"automation",blueprint_id:"mock-addon_update_notification",blueprint_variant:"EPMatt",total:250,last_downloaded:"2025-11-22T10:30:00Z"}],r=e.reduce((e,t)=>e+t.total,0),o=new Map;e.forEach(e=>{o.set(e.blueprint_category,(o.get(e.blueprint_category)??0)+e.total)});const a=Array.from(o.entries()).map(([e,t])=>({blueprint_category:e,total:t}));return t(t=>({...t,totalDownloads:r,byCategory:a,aggregates:e})),L("Supabase variables missing. Showing mock aggregate data instead."),void C(!1)}(async()=>{try{const e=await(0,w.fY)({}),r=e.reduce((e,t)=>e+t.total,0),o=new Map;e.forEach(e=>{o.set(e.blueprint_category,(o.get(e.blueprint_category)??0)+e.total)});const a=Array.from(o.entries()).map(([e,t])=>({blueprint_category:e,total:t}));t(t=>({...t,totalDownloads:r,byCategory:a,aggregates:e})),L(void 0)}catch(e){L(`Failed to load aggregate metrics: ${e?.message||"Unknown error."}`)}finally{C(!1)}})()}},[ce]),(0,o.useEffect)(()=>{if(r)return;if("undefined"==typeof window)return;if(!ce()){const e=[{day:new Date(Date.now()-864e6).toISOString().substring(0,10),total:10},{day:new Date(Date.now()-432e6).toISOString().substring(0,10),total:20},{day:(new Date).toISOString().substring(0,10),total:22}],r=v(e,B);return t(e=>({...e,daily:r})),void A(!1)}A(!0);const e="ALL"===E?null:E,o="controllers"===e&&"ALL"!==M?M:null;(async()=>{try{const r=await(0,w.zN)({days:B,category:e,id:null,variant:o,version:null}),a=v(r,B);t(e=>({...e,daily:a}))}catch(r){L(`Failed to load daily metrics: ${r?.message||"Unknown error."}`)}finally{A(!1)}})()},[ce,r,B,E,M]),(0,_.jsx)(a.A,{title:"Blueprint Download Metrics",description:"Enhanced metrics dashboard with variant-aware analytics",children:(0,_.jsxs)("main",{className:"container margin-vert--lg",style:{backgroundColor:Z.bg,transition:"background-color 0.3s ease",minHeight:"100vh",padding:"2rem"},children:[(0,_.jsx)("h1",{style:{textAlign:"center",marginBottom:"32px",fontSize:"2rem",fontWeight:"bold",color:Z.textPrimary},children:"Blueprint Metrics Dashboard"}),r&&(0,_.jsx)("div",{style:{textAlign:"center",color:Z.textPrimary},children:"Loading core metrics..."}),!r&&D&&(0,_.jsxs)("div",{className:"alert alert--danger",role:"alert",children:[(0,_.jsx)("h4",{className:"alert__heading",children:"Metrics Notice"}),(0,_.jsx)("p",{children:D})]}),!r&&(0,_.jsxs)("div",{style:{width:"100%"},children:[(0,_.jsxs)("section",{style:G,children:[(0,_.jsxs)("div",{style:q,children:[(0,_.jsx)("div",{style:Q(Z.accentColor),children:"Total Downloads"}),(0,_.jsx)("div",{style:{padding:"24px",textAlign:"center"},children:(0,_.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:"900",color:Z.accentColor,margin:0},children:j(F)})})]}),(0,_.jsxs)("div",{style:q,children:[(0,_.jsx)("div",{style:Q("#9333ea"),children:"Tracked Blueprints (rows)"}),(0,_.jsx)("div",{style:{padding:"24px",textAlign:"center"},children:(0,_.jsx)("p",{style:{fontSize:"2.5rem",fontWeight:"900",color:"#9333ea",margin:0},children:j(V.length)})})]})]}),(0,_.jsxs)("section",{style:H,children:[(0,_.jsxs)("div",{style:q,children:[(0,_.jsxs)("h3",{style:X,children:["Daily Downloads (Last ",B," Days)"]}),(0,_.jsx)(te,{current:B,onSelect:T,isDailyLoading:k}),(0,_.jsxs)("div",{style:{height:"350px",padding:"10px",position:"relative"},children:[k&&(0,_.jsx)("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:W?"rgba(36, 37, 38, 0.8)":"rgba(255, 255, 255, 0.8)",zIndex:10,borderRadius:"4px",color:Z.textPrimary,fontSize:"1.2rem",fontWeight:"bold"},children:"Updating chart..."}),(0,_.jsx)(i.u,{width:"100%",height:"100%",children:(0,_.jsxs)(b.Q,{data:Y,margin:{top:10,right:10,left:-10,bottom:0},children:[(0,_.jsx)("defs",{children:(0,_.jsxs)("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,_.jsx)("stop",{offset:"5%",stopColor:Z.accentColor,stopOpacity:.8}),(0,_.jsx)("stop",{offset:"95%",stopColor:Z.accentColor,stopOpacity:0})]})}),(0,_.jsx)(c.d,{strokeDasharray:"3 3",stroke:Z.gridLine,vertical:!1}),(0,_.jsx)(g.W,{dataKey:"label",stroke:Z.textSecondary,tick:{fontSize:10,fill:Z.textSecondary}}),(0,_.jsx)(x.h,{allowDecimals:!1,stroke:Z.textSecondary,tick:{fontSize:10,fill:Z.textSecondary},tickFormatter:j}),(0,_.jsx)(l.m,{content:(0,_.jsx)(J,{})}),(0,_.jsx)(p.Gk,{type:"monotone",dataKey:"total",stroke:Z.accentColor,strokeWidth:3,fill:"url(#colorTotal)"})]})})]})]}),(0,_.jsxs)("div",{style:q,children:[(0,_.jsx)("h3",{style:X,children:"Category Distribution (Click to filter)"}),(0,_.jsx)("div",{style:{height:"350px",padding:"10px"},children:(0,_.jsx)(i.u,{width:"100%",height:"100%",children:(0,_.jsxs)(h.r,{children:[(0,_.jsx)(d.Fq,{data:le,dataKey:"value",nameKey:"category",cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:3,fill:"#8884d8",labelLine:!1,label:({percent:e})=>`${(100*e).toFixed(0)}%`,onClick:e=>{const t=e?.category;t&&($(e=>e===t?"ALL":t),"controllers"!==t&&U("ALL"))},style:{cursor:"pointer"},children:le.map((e,t)=>(0,_.jsx)(s.f,{fill:I(e.category),stroke:W?"#242526":"#fff",opacity:"ALL"===E||E===e.category?1:.4},`cell-${t}`))}),(0,_.jsx)(l.m,{content:(0,_.jsx)(J,{})}),(0,_.jsx)(n.s,{iconType:"circle",wrapperStyle:{fontSize:"12px",color:Z.textPrimary}})]})})})]})]}),(0,_.jsxs)("section",{style:{...q,paddingBottom:"20px",marginBottom:"32px"},children:[(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",borderBottom:`1px solid ${Z.gridLine}`,flexWrap:"wrap",gap:"8px"},children:[(0,_.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},children:[(0,_.jsx)("h3",{style:{...X,borderBottom:"none",paddingLeft:0,margin:0},children:"ALL"===E?`Top ${z} Blueprints (All Categories)`:"controllers"===E&&"ALL"!==M?`Top ${z} Controller Blueprints (${M})`:`Top ${z} ${E.charAt(0).toUpperCase()+E.slice(1)} Blueprints`}),"controllers"===E&&ne.length>0&&(0,_.jsxs)("div",{style:{margin:"8px 0 8px 0"},children:[(0,_.jsx)("label",{style:{fontSize:"0.85rem",marginRight:"8px",color:Z.textSecondary},children:"Variant:"}),(0,_.jsxs)("select",{value:M,onChange:e=>U(e.target.value),style:{padding:"4px 8px",fontSize:"0.85rem",borderRadius:"4px",border:`1px solid ${Z.gridLine}`,background:"var(--ifm-navbar-background-color)",color:"var(--ifm-font-color-base)"},children:[(0,_.jsx)("option",{value:"ALL",children:"All Variants"}),ne.map(e=>(0,_.jsx)("option",{value:e,children:e},e))]})]})]}),(0,_.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,_.jsxs)("div",{style:{position:"relative"},children:[(0,_.jsx)("select",{value:z,onChange:e=>P(Number(e.target.value)),style:{appearance:"none",padding:"6px 32px 6px 10px",fontSize:"14px",cursor:"pointer",backgroundColor:"var(--ifm-navbar-background-color)",color:"var(--ifm-font-color-base)",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"6px"},children:[5,10,15,20,25,30,40,50].map(e=>(0,_.jsxs)("option",{value:e,children:["Top ",e]},e))}),(0,_.jsx)("svg",{style:{position:"absolute",right:"10px",top:"50%",width:"14px",height:"14px",transform:"translateY(-50%)",opacity:.7,pointerEvents:"none"},viewBox:"0 0 24 24",children:(0,_.jsx)("path",{fill:"currentColor",d:"M7 10l5 5 5-5z"})})]}),("ALL"!==E||"controllers"===E&&"ALL"!==M)&&(0,_.jsx)("button",{onClick:()=>{$("ALL"),U("ALL")},style:{fontSize:"12px",padding:"6px 10px",borderRadius:"4px",backgroundColor:"#ef4444",color:"white",border:"none",cursor:"pointer",fontWeight:"bold",transition:"background-color 0.2s",whiteSpace:"nowrap"},title:"Clear category/variant filters",children:"Clear Filters"})]})]}),(0,_.jsx)("div",{style:{height:Math.max(400,40*de.length)},children:de.length>0?(0,_.jsx)(i.u,{width:"100%",height:"100%",children:(0,_.jsxs)(y.E,{data:de,layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[(0,_.jsx)(c.d,{strokeDasharray:"3 3",horizontal:!1,stroke:Z.gridLine}),(0,_.jsx)(g.W,{type:"number",stroke:Z.textSecondary,tick:{fontSize:10,fill:Z.textSecondary},tickFormatter:j,domain:[0,"auto"],allowDecimals:!1}),(0,_.jsx)(x.h,{dataKey:"name",type:"category",width:100,tickLine:!1,axisLine:!1,tick:(0,_.jsx)(ee,{})}),(0,_.jsx)(l.m,{content:(0,_.jsx)(J,{})}),(0,_.jsx)(n.s,{iconType:"circle",wrapperStyle:{fontSize:"12px",color:Z.textPrimary}}),(0,_.jsx)(u.yP,{dataKey:"Downloads",name:"# of Downloads",fill:I("controllers"===E&&"ALL"!==M?M:"ALL"===E?"top-all":E),barSize:20,radius:[0,4,4,0]})]})}):(0,_.jsx)("p",{style:{textAlign:"center",padding:"50px",color:Z.textSecondary},children:"No top blueprints found for the current selection."})})]}),(0,_.jsx)("section",{style:{...q,overflow:"visible"},children:(0,_.jsx)(ae,{data:se})})]})]})})}}}]);