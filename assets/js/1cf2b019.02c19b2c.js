"use strict";(globalThis.webpackChunkawesome_ha_library_website=globalThis.webpackChunkawesome_ha_library_website||[]).push([[6375],{99241(e,t,n){n.r(t),n.d(t,{default:()=>l});var i=n(82128),s=n(36863),a=n(19527),r=n(95556),o=n(77900);function l(){const{siteConfig:e}=(0,a.A)(),{SUPABASE_URL:t,SUPABASE_ANON_KEY:n,ALLOWED_MAINTAINERS:l}=e.customFields.env||{},c=(0,i.useMemo)(()=>(0,r.UU)(t,n),[t,n]),[d,h]=(0,i.useState)(null),[u,g]=(0,i.useState)(!0);(0,i.useEffect)(()=>{c.auth.getSession().then(({data:{session:e}})=>{h(e),g(!1)});const{data:{subscription:e}}=c.auth.onAuthStateChange((e,t)=>{h(t),g(!1)});return()=>e.unsubscribe()},[c]);const b=async()=>{await c.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+e.baseUrl+"maintain"}})},m=async()=>{await c.auth.signOut(),h(null)};if(u)return(0,o.jsx)(s.A,{title:"Loading...",children:(0,o.jsx)("div",{style:{padding:"5rem",textAlign:"center"},children:(0,o.jsx)("div",{className:"loader",children:"Verifying permissions..."})})});const x=d?.user?.email?.toLowerCase(),j=x&&l?.some(e=>e.toLowerCase()===x);return d?j?(0,o.jsx)(s.A,{title:"Maintainer Dashboard",children:(0,o.jsxs)("main",{style:{padding:"2rem",maxWidth:"1000px",margin:"0 auto"},children:[(0,o.jsx)("h1",{children:"Maintenance Dashboard"}),(0,o.jsxs)("div",{className:"alert alert--success",role:"alert",children:["Logged in as: ",(0,o.jsx)("strong",{children:x})]}),(0,o.jsxs)("section",{style:{marginTop:"2rem",border:"1px solid var(--ifm-color-emphasis-300)",padding:"1rem",borderRadius:"8px"},children:[(0,o.jsx)("h3",{children:"Admin Actions"}),(0,o.jsx)("p",{children:"Welcome to the control panel. Use the tools below to manage the library."}),(0,o.jsx)("hr",{}),(0,o.jsx)("button",{onClick:m,className:"button button--outline button--danger",children:"Logout"})]})]})}):(0,o.jsx)(s.A,{title:"Access Denied",children:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"5rem"},children:[(0,o.jsx)("h1",{style:{color:"var(--ifm-color-danger)"},children:"Unauthorized"}),(0,o.jsxs)("p",{children:["The account ",(0,o.jsx)("strong",{children:x})," does not have maintainer privileges."]}),(0,o.jsx)("button",{onClick:m,className:"button button--secondary",children:"Sign Out"})]})}):(0,o.jsx)(s.A,{title:"Maintainer Access",children:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"5rem"},children:[(0,o.jsx)("h1",{children:"Maintainer Access"}),(0,o.jsx)("p",{children:"Please log in with an authorized GitHub account."}),(0,o.jsx)("button",{onClick:b,className:"button button--primary button--lg",children:"Login with GitHub"})]})})}}}]);