"use strict";(globalThis.webpackChunkawesome_ha_library_website=globalThis.webpackChunkawesome_ha_library_website||[]).push([[6375],{53304(e,n,i){i.r(n),i.d(n,{default:()=>x});var t=i(82128),s=i(36863),r=i(19527),o=i(95556),a=i(89893),l=i(77900);function d({session:e}){const n=e.user,i=n.email??"unknown",t=n.app_metadata?.provider??"unknown",s=e.access_token?new Date(n.last_sign_in_at??"").toLocaleString():"unknown",r=e.expires_at?new Date(1e3*e.expires_at).toLocaleString():"unknown",o="undefined"!=typeof window&&window.location.hostname.includes("localhost")?"development":"production";return(0,l.jsxs)("section",{style:{...a.H5,...a.gB},children:[(0,l.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem"},children:"Maintainer Context"}),(0,l.jsxs)("dl",{style:{display:"grid",gridTemplateColumns:"max-content 1fr",rowGap:"0.5rem",columnGap:"1rem",margin:0},children:[(0,l.jsx)("dt",{children:"Email"}),(0,l.jsx)("dd",{children:i}),(0,l.jsx)("dt",{children:"Auth Provider"}),(0,l.jsx)("dd",{children:t}),(0,l.jsx)("dt",{children:"Maintainer Status"}),(0,l.jsx)("dd",{children:"Authorized"}),(0,l.jsx)("dt",{children:"Environment"}),(0,l.jsx)("dd",{children:o}),(0,l.jsx)("dt",{children:"Session Issued"}),(0,l.jsx)("dd",{children:s}),(0,l.jsx)("dt",{children:"Session Expires"}),(0,l.jsx)("dd",{children:r})]})]})}var c=i(69791);function h(){return(0,l.jsxs)("section",{style:{...a.H5,...a.gB},children:[(0,l.jsx)("h3",{style:{marginTop:0},children:"Navigation"}),(0,l.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0},children:[(0,l.jsx)("li",{style:{marginBottom:"0.5rem"},children:(0,l.jsx)(c.A,{to:"/library-explorer",className:"button button--secondary button--sm",children:"Open Library Explorer"})}),(0,l.jsx)("li",{style:{marginBottom:"0.5rem"},children:(0,l.jsx)(c.A,{to:"/library-report",children:"Library Report"})}),(0,l.jsx)("li",{style:{marginBottom:"0.5rem"},children:(0,l.jsx)(c.A,{to:"/metrics",children:"Metrics Dashboard"})}),(0,l.jsx)("li",{style:{marginBottom:"0.5rem",opacity:.6},children:"Validation Tools (coming soon)"}),(0,l.jsx)("li",{style:{marginBottom:"0.5rem",opacity:.6},children:"Workflow Status (coming soon)"})]})]})}function m(){return(0,l.jsxs)("section",{style:{...a.H5,...a.s9},children:[(0,l.jsx)("h3",{style:{marginTop:0},children:"System Status"}),(0,l.jsx)("p",{style:{marginBottom:0},children:"System and library status indicators will appear here."})]})}function u(){return(0,l.jsxs)("section",{style:{...a.H5,...a.s9},children:[(0,l.jsx)("h3",{style:{marginTop:0},children:"Safe Actions"}),(0,l.jsx)("p",{style:{marginBottom:0},children:"Maintainer-safe actions will be exposed here in the future."})]})}function x(){const{siteConfig:e}=(0,r.A)(),{SUPABASE_URL:n,SUPABASE_ANON_KEY:i,ALLOWED_MAINTAINERS:a}=e.customFields.env||{};if(!n||!i)throw new Error("Supabase environment variables are not configured");const c=Array.isArray(a)?a:[],x=(0,t.useMemo)(()=>(0,o.UU)(n,i),[n,i]),[g,p]=(0,t.useState)(null),[j,b]=(0,t.useState)(!0);(0,t.useEffect)(()=>{x.auth.getSession().then(({data:{session:e}})=>{p(e),b(!1)});const{data:{subscription:e}}=x.auth.onAuthStateChange((e,n)=>{p(n),b(!1)});return()=>e.unsubscribe()},[x]);const y=async()=>{await x.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+e.baseUrl+"maintainer"}})},w=async()=>{await x.auth.signOut(),p(null)};if(j)return(0,l.jsx)(s.A,{title:"Loading...",children:(0,l.jsx)("div",{style:{padding:"5rem",textAlign:"center"},children:(0,l.jsx)("div",{className:"loader",children:"Verifying permissions..."})})});const A=g?.user?.email?.toLowerCase(),f=!!A&&c.some(e=>e.toLowerCase()===A);return g?f?(0,l.jsx)(s.A,{title:"Maintainer Dashboard",children:(0,l.jsxs)("main",{style:{padding:"2rem",maxWidth:"1000px",margin:"0 auto"},children:[(0,l.jsx)("h1",{style:{marginBottom:"1.5rem"},children:"Maintenance Dashboard"}),(0,l.jsx)("section",{children:(0,l.jsx)(d,{session:g})}),(0,l.jsx)(h,{}),(0,l.jsx)(m,{}),(0,l.jsx)(u,{}),(0,l.jsxs)("section",{style:{marginTop:"2rem",border:"1px solid var(--ifm-color-emphasis-300)",padding:"1rem",borderRadius:"8px"},children:[(0,l.jsx)("h3",{children:"Admin Actions"}),(0,l.jsx)("p",{children:"Welcome to the control panel. Use the tools below to manage the library."}),(0,l.jsx)("hr",{}),(0,l.jsx)("button",{onClick:w,className:"button button--outline button--danger",children:"Logout"})]})]})}):(0,l.jsx)(s.A,{title:"Access Denied",children:(0,l.jsxs)("div",{style:{textAlign:"center",padding:"5rem"},children:[(0,l.jsx)("h1",{style:{color:"var(--ifm-color-danger)"},children:"Unauthorized"}),(0,l.jsxs)("p",{children:["The account ",(0,l.jsx)("strong",{children:A})," does not have maintainer privileges."]}),(0,l.jsx)("button",{onClick:w,className:"button button--secondary",children:"Sign Out"})]})}):(0,l.jsx)(s.A,{title:"Maintainer Access",children:(0,l.jsxs)("div",{style:{textAlign:"center",padding:"5rem"},children:[(0,l.jsx)("h1",{children:"Maintainer Access"}),(0,l.jsx)("p",{children:"Please log in with an authorized GitHub account."}),(0,l.jsx)("button",{onClick:y,className:"button button--primary button--lg",children:"Login with GitHub"})]})})}},89893(e,n,i){i.d(n,{H5:()=>t,gB:()=>s,s9:()=>r});const t={marginTop:"2rem",padding:"1.25rem",borderRadius:"12px",background:"var(--ifm-background-surface-color)"},s={border:"1px solid var(--ifm-color-emphasis-300)"},r={border:"1px dashed var(--ifm-color-emphasis-300)",opacity:.85}}}]);